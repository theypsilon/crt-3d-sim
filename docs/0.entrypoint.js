(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,n){const o="scaling-auto",r="scaling-4:3",i="scaling-custom",c="scaling-stretch-both",a="scaling-stretch-nearest",d="powerPreference-1",u="gl-canvas",s="preview",l="scaling",f="powerPreference",_=document.getElementById("ui"),g=document.getElementById("form"),w=document.getElementById("loading"),p=document.getElementById("file"),m=document.getElementById("start-custom"),b=document.getElementById("start-animation"),h=document.getElementById("antialias"),y=document.getElementById("scaling-custom-resolution-width"),x=document.getElementById("scaling-custom-resolution-height"),E=document.getElementById("scaling-custom-aspect-ratio-x"),L=document.getElementById("scaling-custom-aspect-ratio-y"),C=document.getElementById("scaling-custom-stretch-nearest"),v=document.getElementById("scaling-custom-inputs"),R=document.getElementById("drop-zone"),G=document.getElementById("restore-default-options"),W=document.getElementById("info-hide"),I=document.getElementById("info-panel"),P=document.getElementById("fps-counter"),S=document.getElementById("light-color"),A=document.getElementById("camera-pos-x"),D=document.getElementById("camera-pos-y"),k=document.getElementById("camera-pos-z"),M=document.getElementById("camera-dir-x"),O=document.getElementById("camera-dir-y"),B=document.getElementById("camera-dir-z"),T=document.getElementById("camera-axis-up-x"),F=document.getElementById("camera-axis-up-y"),H=document.getElementById("camera-axis-up-z"),U=document.getElementById("pixel-scale-x"),j=document.getElementById("pixel-scale-y"),q=document.getElementById("pixel-gap"),V=()=>document.getElementById(u),Y=()=>document.getElementById(s),z=function(){return{showUi:()=>e(_),hideUi:()=>t(_),showLoading:()=>e(w),hideLoading:()=>t(w),showInfoPanel:()=>e(I),hideInfoPanel:()=>t(I),isInfoPanelVisible:()=>(function(e){return 0==e.classList.contains("display-none")})(I),showScaleCustomInputs:()=>e(v),hideScaleCustomInputs:()=>t(v)};function e(e){e.classList.remove("display-none")}function t(e){e.classList.add("display-none")}}(),X=function(){return{getScalingInputElement:()=>e("option-scaling-id",o),setScalingId:e=>localStorage.setItem("option-scaling-id",e),getCustomResWidth:()=>localStorage.getItem("option-scaling-custom-resolution-width")||256,setCustomResWidth:e=>localStorage.setItem("option-scaling-custom-resolution-width",e),getCustomResHeight:()=>localStorage.getItem("option-scaling-custom-resolution-height")||224,setCustomResHeight:e=>localStorage.setItem("option-scaling-custom-resolution-height",e),getCustomArX:()=>localStorage.getItem("option-scaling-custom-aspect-ratio-x")||4,setCustomArX:e=>localStorage.setItem("option-scaling-custom-aspect-ratio-x",e),getCustomArY:()=>localStorage.getItem("option-scaling-custom-aspect-ratio-y")||3,setCustomArY:e=>localStorage.setItem("option-scaling-custom-aspect-ratio-y",e),getCustomStretchNearest:()=>"true"===localStorage.getItem("option-scaling-custom-stretch-nearest"),setCustomStretchNearest:e=>localStorage.setItem("option-scaling-custom-stretch-nearest",e?"true":"false"),getPowerPreferenceInputElement:()=>e("option-powerPreference-id",d),setPowerPreference:e=>localStorage.setItem("option-powerPreference-id",e),getAntiAliasing:()=>"false"!==localStorage.getItem("option-antialias"),setAntiAliasing:e=>localStorage.setItem("option-antialias",e?"true":"false"),removeAllOptions:()=>{localStorage.removeItem("option-scaling-id"),localStorage.removeItem("option-scaling-custom-resolution-width"),localStorage.removeItem("option-scaling-custom-resolution-height"),localStorage.removeItem("option-scaling-custom-aspect-ratio-x"),localStorage.removeItem("option-scaling-custom-aspect-ratio-y"),localStorage.removeItem("option-scaling-custom-stretch-nearest"),localStorage.removeItem("option-powerPreference-id"),localStorage.removeItem("option-antialias")}};function e(e,t){return document.getElementById(localStorage.getItem(e))||document.getElementById(t)}}();function K(){N(),z.showUi(),z.hideLoading(),new Promise((e,t)=>{m.onclick=(()=>{z.hideUi(),z.showLoading(),setTimeout(()=>{const t=Y(),n=document.createElement("canvas"),o=n.getContext("2d");n.width=t.width,n.height=t.height,o.drawImage(t,0,0);var r=o.getImageData(0,0,t.width,t.height);e([r])},50)}),b.onclick=(()=>{z.hideUi(),z.showLoading(),new Promise((e,t)=>{const n=new Image;n.src="assets/wwix_spritesheet.png",n.onload=(()=>{const t=document.createElement("canvas"),o=t.getContext("2d");t.width=n.width,t.height=n.height,o.drawImage(n,0,0);const r=Math.floor(n.width/256),i=[];for(let e=0;e<=45;e++){const t=e%r,n=Math.floor(e/r);i.push(o.getImageData(256*t,224*n,256,224))}e(i)}),n.onerror=(e=>t(e))}).then(e)})}).then(e=>{console.log((new Date).toISOString(),"image readed");const t=window.devicePixelRatio,d=window.screen.width,s=window.screen.height,_=g.querySelector("input[name='"+l+"']:checked");let w=1,p=!1;X.setScalingId(_.id);const m=e[0].width,b=e[0].height;switch(_.id){case o:w=m<=1024?4/3/(m/b):1,window.dispatchEvent(new CustomEvent("app-event.top_message",{detail:"Scaling auto detect: "+(1===w?"none.":"4:3 on full image.")}));break;case r:w=4/3/(m/b);break;case c:w=d/s/(m/b),p=!0;break;case a:p=!0;break;case i:p=C.checked,X.setCustomResWidth(y.value),X.setCustomResHeight(x.value),X.setCustomArX(E.value),X.setCustomArY(L.value),X.setCustomStretchNearest(p),w=+E.value/+L.value/(+y.value/+x.value)}S.value="#FFFFFF";const v=document.createElement("canvas");v.id=u,v.width=80*Math.floor(d*t/80),v.height=60*Math.floor(s*t/60),v.style.width=d,v.style.height=s,I.style.setProperty("max-height",s-36),document.body.appendChild(v);const R=g.querySelector("input[name='"+f+"']:checked"),G={alpha:!0,antialias:h.checked,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:R.value,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1};X.setAntiAliasing(G.antialias),X.setPowerPreference(R.id),console.log("gl context form",G);const W=v.getContext("webgl2",G);var P=document.documentElement;if(P.requestFullscreen=P.requestFullscreen||P.webkitRequestFullScreen||P.mozRequestFullScreen||P.msRequestFullscreen,v.onmousedown=(e=>{1==e.buttons&&(v.requestPointerLock(),window.screen.width!=window.innerWidth&&window.screen.height!=window.innerHeight&&P.requestFullscreen())}),v.requestPointerLock=v.requestPointerLock||v.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,!W)return window.dispatchEvent(new CustomEvent("app-event.top_message",{detail:"WebGL is not working on your browser, try restarting it! And remember, this works only on a PC with updated browser and graphics drivers."})),console.error(new Error("Could not get webgl context.")),v.remove(),void K();n.e(0).then(n.bind(null,2)).then(n=>{const o=new n.Animation_Source(e[0].width,e[0].height,v.width,v.height,1/60,+w,p,t);for(let t=0;t<e.length;t++){const n=e[t];o.add(n.data.buffer)}console.log((new Date).toISOString(),"calling wasm main"),n.main(W,o),console.log((new Date).toISOString(),"wasm main done"),z.hideLoading(),z.showInfoPanel()})})}function N(){const e=X.getScalingInputElement();e.checked=!0,e.id===i?z.showScaleCustomInputs():z.hideScaleCustomInputs(),y.value=X.getCustomResWidth(),x.value=X.getCustomResHeight(),E.value=X.getCustomArX(),L.value=X.getCustomArY(),C.checked=X.getCustomStretchNearest(),h.checked=X.getAntiAliasing(),X.getPowerPreferenceInputElement().checked=!0}async function J(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="blob",t.send(null),await new Promise(e=>t.onload=(()=>e()));const n=URL.createObjectURL(t.response),o=new Image;o.src=n,await new Promise(e=>o.onload=(()=>e()));const r=Y();r&&r.remove(),o.id=s,o.width>o.height?o.style.width="100px":o.style.height="100px",R.innerHTML="",R.appendChild(o),console.log((new Date).toISOString(),"image loaded"),m.disabled=!1}window.ondrop=(e=>{e.preventDefault()}),window.ondragover=(e=>{e.preventDefault(),e.dataTransfer.dropEffect="none"}),window.addEventListener("app-event.toggle_info_panel",()=>{V()&&(!1===z.isInfoPanelVisible()?z.showInfoPanel():(z.hideInfoPanel(),window.dispatchEvent(new CustomEvent("app-event.top_message",{detail:"Toggle the Info Panel by pressing SPACE."}))))},!1),window.addEventListener("app-event.exit_pointer_lock",()=>{document.exitPointerLock()},!1),window.addEventListener("app-event.exiting_session",()=>{K(),V().remove(),z.hideInfoPanel()},!1),window.addEventListener("app-event.fps",e=>{P.innerHTML=Math.round(e.detail)},!1),window.addEventListener("app-event.top_message",e=>{const t=document.getElementById("top-message");t&&t.remove();const n=document.createElement("div");n.id="top-message";const o=document.createElement("span");o.innerHTML=e.detail,n.appendChild(o),document.body.appendChild(n);let r=.75;n.style.opacity=r,setTimeout(()=>{!function e(){r>=.01?(r-=.01,n.style.opacity=r,setTimeout(e,16)):n.remove()}()},100*e.detail.length)},!1),window.addEventListener("app-event.camera_update",e=>{A.innerHTML=Math.round(100*e.detail[0])/100,D.innerHTML=Math.round(100*e.detail[1])/100,k.innerHTML=Math.round(100*e.detail[2])/100,M.innerHTML=Math.round(100*e.detail[3])/100,O.innerHTML=Math.round(100*e.detail[4])/100,B.innerHTML=Math.round(100*e.detail[5])/100,T.innerHTML=Math.round(100*e.detail[6])/100,F.innerHTML=Math.round(100*e.detail[7])/100,H.innerHTML=Math.round(100*e.detail[8])/100},!1),window.addEventListener("app-event.change_pixel_scale_x",e=>{U.innerHTML=Math.round(1e3*e.detail)/1e3},!1),window.addEventListener("app-event.change_pixel_scale_y",e=>{j.innerHTML=Math.round(1e3*e.detail)/1e3},!1),window.addEventListener("app-event.change_pixel_gap",e=>{q.innerHTML=Math.round(1e3*e.detail)/1e3},!1),S.onchange=(()=>{const e=new Int32Array(1),t="0x"+S.value.substring(1);e.fill(parseInt(t),0,1),window.dispatchEvent(new CustomEvent("app-event.light_color",{detail:e}))}),W.onclick=(()=>{V()&&(z.hideInfoPanel(),window.dispatchEvent(new CustomEvent("app-event.top_message",{detail:"Show the Info Panel again by pressing SPACE."})))}),p.onchange=(()=>{const e=p.files[0];J((window.URL||window.webkitURL).createObjectURL(e))}),R.onclick=(()=>{p.click()}),R.ondragover=(e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),R.ondrop=(e=>{e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files[0];J((window.URL||window.webkitURL).createObjectURL(t))}),document.form[l].forEach(e=>{e.onclick=function(){this.id===i?z.showScaleCustomInputs():z.hideScaleCustomInputs()}}),G.onclick=(()=>{X.removeAllOptions(),X.getScalingInputElement().checked=!1,X.getPowerPreferenceInputElement().checked=!1,N()}),K()},function(e,t,n){"use strict";n.r(t),n.d(t,"main",function(){return a}),n.d(t,"__widl_f_error_2_",function(){return l}),n.d(t,"__widl_f_log_2_",function(){return _}),n.d(t,"__widl_instanceof_CustomEvent",function(){return g}),n.d(t,"__widl_f_new_with_event_init_dict_CustomEvent",function(){return x}),n.d(t,"__widl_f_detail_CustomEvent",function(){return C}),n.d(t,"__widl_f_set_onkeydown_Document",function(){return R}),n.d(t,"__widl_f_set_onkeyup_Document",function(){return W}),n.d(t,"__widl_f_set_onmousedown_Document",function(){return P}),n.d(t,"__widl_f_set_onmousemove_Document",function(){return A}),n.d(t,"__widl_f_set_onmouseup_Document",function(){return k}),n.d(t,"__widl_f_set_onwheel_Document",function(){return O}),n.d(t,"__widl_instanceof_Event",function(){return B}),n.d(t,"__widl_f_new_Event",function(){return T}),n.d(t,"__widl_instanceof_EventTarget",function(){return F}),n.d(t,"__widl_f_add_event_listener_with_callback_EventTarget",function(){return U}),n.d(t,"__widl_f_dispatch_event_EventTarget",function(){return q}),n.d(t,"__widl_instanceof_KeyboardEvent",function(){return V}),n.d(t,"__widl_f_key_KeyboardEvent",function(){return K}),n.d(t,"__widl_instanceof_MouseEvent",function(){return N}),n.d(t,"__widl_f_buttons_MouseEvent",function(){return $}),n.d(t,"__widl_f_movement_x_MouseEvent",function(){return Z}),n.d(t,"__widl_f_movement_y_MouseEvent",function(){return te}),n.d(t,"__widl_f_now_Performance",function(){return oe}),n.d(t,"__widl_instanceof_WebGL2RenderingContext",function(){return re}),n.d(t,"__widl_f_bind_vertex_array_WebGL2RenderingContext",function(){return ce}),n.d(t,"__widl_f_buffer_data_with_opt_array_buffer_WebGL2RenderingContext",function(){return de}),n.d(t,"__widl_f_create_vertex_array_WebGL2RenderingContext",function(){return le}),n.d(t,"__widl_f_draw_arrays_instanced_WebGL2RenderingContext",function(){return _e}),n.d(t,"__widl_f_tex_image_2d_with_i32_and_i32_and_i32_and_format_and_type_and_opt_u8_array_WebGL2RenderingContext",function(){return we}),n.d(t,"__widl_f_uniform2fv_with_f32_array_WebGL2RenderingContext",function(){return he}),n.d(t,"__widl_f_uniform3fv_with_f32_array_WebGL2RenderingContext",function(){return xe}),n.d(t,"__widl_f_uniform_matrix4fv_with_f32_array_WebGL2RenderingContext",function(){return Le}),n.d(t,"__widl_f_vertex_attrib_divisor_WebGL2RenderingContext",function(){return ve}),n.d(t,"__widl_f_attach_shader_WebGL2RenderingContext",function(){return Ge}),n.d(t,"__widl_f_bind_buffer_WebGL2RenderingContext",function(){return Ie}),n.d(t,"__widl_f_bind_framebuffer_WebGL2RenderingContext",function(){return Se}),n.d(t,"__widl_f_bind_texture_WebGL2RenderingContext",function(){return De}),n.d(t,"__widl_f_clear_WebGL2RenderingContext",function(){return Me}),n.d(t,"__widl_f_clear_color_WebGL2RenderingContext",function(){return Be}),n.d(t,"__widl_f_compile_shader_WebGL2RenderingContext",function(){return Fe}),n.d(t,"__widl_f_create_buffer_WebGL2RenderingContext",function(){return Ue}),n.d(t,"__widl_f_create_framebuffer_WebGL2RenderingContext",function(){return qe}),n.d(t,"__widl_f_create_program_WebGL2RenderingContext",function(){return Ye}),n.d(t,"__widl_f_create_shader_WebGL2RenderingContext",function(){return Xe}),n.d(t,"__widl_f_create_texture_WebGL2RenderingContext",function(){return Ne}),n.d(t,"__widl_f_draw_elements_with_i32_WebGL2RenderingContext",function(){return $e}),n.d(t,"__widl_f_enable_WebGL2RenderingContext",function(){return Ze}),n.d(t,"__widl_f_enable_vertex_attrib_array_WebGL2RenderingContext",function(){return tt}),n.d(t,"__widl_f_framebuffer_texture_2d_WebGL2RenderingContext",function(){return ot}),n.d(t,"__widl_f_get_attrib_location_WebGL2RenderingContext",function(){return it}),n.d(t,"__widl_f_get_error_WebGL2RenderingContext",function(){return at}),n.d(t,"__widl_f_get_program_info_log_WebGL2RenderingContext",function(){return ut}),n.d(t,"__widl_f_get_program_parameter_WebGL2RenderingContext",function(){return lt}),n.d(t,"__widl_f_get_shader_info_log_WebGL2RenderingContext",function(){return _t}),n.d(t,"__widl_f_get_shader_parameter_WebGL2RenderingContext",function(){return wt}),n.d(t,"__widl_f_get_uniform_location_WebGL2RenderingContext",function(){return mt}),n.d(t,"__widl_f_link_program_WebGL2RenderingContext",function(){return ht}),n.d(t,"__widl_f_shader_source_WebGL2RenderingContext",function(){return xt}),n.d(t,"__widl_f_tex_parameteri_WebGL2RenderingContext",function(){return Lt}),n.d(t,"__widl_f_uniform1f_WebGL2RenderingContext",function(){return vt}),n.d(t,"__widl_f_uniform1i_WebGL2RenderingContext",function(){return Gt}),n.d(t,"__widl_f_use_program_WebGL2RenderingContext",function(){return It}),n.d(t,"__widl_f_vertex_attrib_pointer_with_i32_WebGL2RenderingContext",function(){return St}),n.d(t,"__widl_instanceof_WheelEvent",function(){return At}),n.d(t,"__widl_f_delta_y_WheelEvent",function(){return kt}),n.d(t,"__widl_instanceof_Window",function(){return Mt}),n.d(t,"__widl_f_request_animation_frame_Window",function(){return Bt}),n.d(t,"__widl_f_document_Window",function(){return Ft}),n.d(t,"__widl_f_performance_Window",function(){return Ut}),n.d(t,"__wbg_new_b0f6b20c16090c90",function(){return jt}),n.d(t,"__wbg_fill_9f0d9c86387a5bbe",function(){return Vt}),n.d(t,"__wbg_buffer_1034a5b5085bbbb5",function(){return zt}),n.d(t,"__wbg_newnoargs_b1f726fad978f5a3",function(){return Xt}),n.d(t,"__wbg_call_fa7f0da29d7b9250",function(){return Nt}),n.d(t,"__wbg_instanceof_Int32Array_355f93bae5537aef",function(){return Jt}),n.d(t,"__wbg_new_8a965115a94e60a6",function(){return $t}),n.d(t,"__wbg_fill_cce7cbd502c089ed",function(){return Zt}),n.d(t,"__wbg_buffer_0d3e7d987a46cf96",function(){return tn}),n.d(t,"__wbg_forEach_1fc1fa08908938f4",function(){return cn}),n.d(t,"__wbg_new_70e5fc804058d6a0",function(){return an}),n.d(t,"__wbg_set_3387446d3253486c",function(){return un}),n.d(t,"Animation_Source",function(){return sn}),n.d(t,"__wbindgen_object_clone_ref",function(){return ln}),n.d(t,"__wbindgen_object_drop_ref",function(){return _n}),n.d(t,"__wbindgen_string_new",function(){return gn}),n.d(t,"__wbindgen_number_new",function(){return wn}),n.d(t,"__wbindgen_boolean_get",function(){return pn}),n.d(t,"__wbindgen_cb_drop",function(){return mn}),n.d(t,"__wbindgen_closure_wrapper31",function(){return bn}),n.d(t,"__wbindgen_throw",function(){return hn}),n.d(t,"__wbindgen_Math_tan",function(){return yn});var o=n(3);const r=[{obj:void 0},{obj:null},{obj:!0},{obj:!1}];let i=r.length;function c(e){i===r.length&&r.push(r.length+1);const t=i,n=r[t];return i=n,r[t]={obj:e,cnt:1},t<<1}function a(e,t){const n=t.ptr;if(0===n)throw new Error("Attempt to use a moved value");return t.ptr=0,o.g(c(e),n)}const d=console.error,u=[];function s(e){if(1==(1&e))return u[e>>1];return r[e>>1].obj}function l(e,t){d(s(e),s(t))}const f=console.log;function _(e,t){f(s(e),s(t))}function g(e){return s(e)instanceof CustomEvent?1:0}let w=null;function p(){return null!==w&&w.buffer===o.h.buffer||(w=new Uint32Array(o.h.buffer)),w}let m=new TextDecoder("utf-8"),b=null;function h(){return null!==b&&b.buffer===o.h.buffer||(b=new Uint8Array(o.h.buffer)),b}function y(e,t){return m.decode(h().subarray(e,e+t))}function x(e,t,n,o){let r=y(e,t);try{return c(new CustomEvent(r,s(n)))}catch(e){const t=p();t[o/4]=1,t[o/4+1]=c(e)}}function E(e,t){for(;e;){let n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=Object.getPrototypeOf(e)}throw new Error(`descriptor for id='${t}' not found`)}const L=E(CustomEvent.prototype,"detail").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(CustomEvent.prototype, 'detail').get does not exist")};function C(e){return c(L.call(s(e)))}const v=E(Document.prototype,"onkeydown").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onkeydown').set does not exist")};function R(e,t){v.call(s(e),s(t))}const G=E(Document.prototype,"onkeyup").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onkeyup').set does not exist")};function W(e,t){G.call(s(e),s(t))}const I=E(Document.prototype,"onmousedown").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onmousedown').set does not exist")};function P(e,t){I.call(s(e),s(t))}const S=E(Document.prototype,"onmousemove").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onmousemove').set does not exist")};function A(e,t){S.call(s(e),s(t))}const D=E(Document.prototype,"onmouseup").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onmouseup').set does not exist")};function k(e,t){D.call(s(e),s(t))}const M=E(Document.prototype,"onwheel").set||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Document.prototype, 'onwheel').set does not exist")};function O(e,t){M.call(s(e),s(t))}function B(e){return s(e)instanceof Event?1:0}function T(e,t,n){let o=y(e,t);try{return c(new Event(o))}catch(e){const t=p();t[n/4]=1,t[n/4+1]=c(e)}}function F(e){return s(e)instanceof EventTarget?1:0}const H=EventTarget.prototype.addEventListener||function(){throw new Error("wasm-bindgen: EventTarget.prototype.addEventListener does not exist")};function U(e,t,n,o,r){let i=y(t,n);try{H.call(s(e),i,s(o))}catch(e){const t=p();t[r/4]=1,t[r/4+1]=c(e)}}const j=EventTarget.prototype.dispatchEvent||function(){throw new Error("wasm-bindgen: EventTarget.prototype.dispatchEvent does not exist")};function q(e,t,n){try{return j.call(s(e),s(t))?1:0}catch(e){const t=p();t[n/4]=1,t[n/4+1]=c(e)}}function V(e){return s(e)instanceof KeyboardEvent?1:0}const Y=E(KeyboardEvent.prototype,"key").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(KeyboardEvent.prototype, 'key').get does not exist")};let z=new TextEncoder("utf-8");function X(e){const t=z.encode(e),n=o.d(t.length);return h().set(t,n),[n,t.length]}function K(e,t){const[n,o]=X(Y.call(s(t))),r=p();r[e/4]=n,r[e/4+1]=o}function N(e){return s(e)instanceof MouseEvent?1:0}const J=E(MouseEvent.prototype,"buttons").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(MouseEvent.prototype, 'buttons').get does not exist")};function $(e){return J.call(s(e))}const Q=E(MouseEvent.prototype,"movementX").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(MouseEvent.prototype, 'movementX').get does not exist")};function Z(e){return Q.call(s(e))}const ee=E(MouseEvent.prototype,"movementY").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(MouseEvent.prototype, 'movementY').get does not exist")};function te(e){return ee.call(s(e))}const ne=Performance.prototype.now||function(){throw new Error("wasm-bindgen: Performance.prototype.now does not exist")};function oe(e){return ne.call(s(e))}function re(e){return s(e)instanceof WebGL2RenderingContext?1:0}const ie=WebGL2RenderingContext.prototype.bindVertexArray||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.bindVertexArray does not exist")};function ce(e,t){ie.call(s(e),s(t))}const ae=WebGL2RenderingContext.prototype.bufferData||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.bufferData does not exist")};function de(e,t,n,o){ae.call(s(e),t,s(n),o)}const ue=WebGL2RenderingContext.prototype.createVertexArray||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createVertexArray does not exist")};function se(e){return void 0===e||null===e}function le(e){const t=ue.call(s(e));return se(t)?0:c(t)}const fe=WebGL2RenderingContext.prototype.drawArraysInstanced||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.drawArraysInstanced does not exist")};function _e(e,t,n,o,r){fe.call(s(e),t,n,o,r)}const ge=WebGL2RenderingContext.prototype.texImage2D||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.texImage2D does not exist")};function we(e,t,n,o,r,i,a,d,u,l,f,_){let g=0==l?void 0:function(e,t){return h().subarray(e/1,e/1+t)}(l,f);try{ge.call(s(e),t,n,o,r,i,a,d,u,g)}catch(e){const t=p();t[_/4]=1,t[_/4+1]=c(e)}}const pe=WebGL2RenderingContext.prototype.uniform2fv||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.uniform2fv does not exist")};let me=null;function be(e,t){return(null!==me&&me.buffer===o.h.buffer||(me=new Float32Array(o.h.buffer)),me).subarray(e/4,e/4+t)}function he(e,t,n,o){let r=be(n,o);pe.call(s(e),s(t),r)}const ye=WebGL2RenderingContext.prototype.uniform3fv||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.uniform3fv does not exist")};function xe(e,t,n,o){let r=be(n,o);ye.call(s(e),s(t),r)}const Ee=WebGL2RenderingContext.prototype.uniformMatrix4fv||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.uniformMatrix4fv does not exist")};function Le(e,t,n,o,r){let i=be(o,r);Ee.call(s(e),s(t),0!==n,i)}const Ce=WebGL2RenderingContext.prototype.vertexAttribDivisor||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.vertexAttribDivisor does not exist")};function ve(e,t,n){Ce.call(s(e),t,n)}const Re=WebGL2RenderingContext.prototype.attachShader||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.attachShader does not exist")};function Ge(e,t,n){Re.call(s(e),s(t),s(n))}const We=WebGL2RenderingContext.prototype.bindBuffer||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.bindBuffer does not exist")};function Ie(e,t,n){We.call(s(e),t,s(n))}const Pe=WebGL2RenderingContext.prototype.bindFramebuffer||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.bindFramebuffer does not exist")};function Se(e,t,n){Pe.call(s(e),t,s(n))}const Ae=WebGL2RenderingContext.prototype.bindTexture||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.bindTexture does not exist")};function De(e,t,n){Ae.call(s(e),t,s(n))}const ke=WebGL2RenderingContext.prototype.clear||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.clear does not exist")};function Me(e,t){ke.call(s(e),t)}const Oe=WebGL2RenderingContext.prototype.clearColor||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.clearColor does not exist")};function Be(e,t,n,o,r){Oe.call(s(e),t,n,o,r)}const Te=WebGL2RenderingContext.prototype.compileShader||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.compileShader does not exist")};function Fe(e,t){Te.call(s(e),s(t))}const He=WebGL2RenderingContext.prototype.createBuffer||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createBuffer does not exist")};function Ue(e){const t=He.call(s(e));return se(t)?0:c(t)}const je=WebGL2RenderingContext.prototype.createFramebuffer||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createFramebuffer does not exist")};function qe(e){const t=je.call(s(e));return se(t)?0:c(t)}const Ve=WebGL2RenderingContext.prototype.createProgram||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createProgram does not exist")};function Ye(e){const t=Ve.call(s(e));return se(t)?0:c(t)}const ze=WebGL2RenderingContext.prototype.createShader||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createShader does not exist")};function Xe(e,t){const n=ze.call(s(e),t);return se(n)?0:c(n)}const Ke=WebGL2RenderingContext.prototype.createTexture||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.createTexture does not exist")};function Ne(e){const t=Ke.call(s(e));return se(t)?0:c(t)}const Je=WebGL2RenderingContext.prototype.drawElements||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.drawElements does not exist")};function $e(e,t,n,o,r){Je.call(s(e),t,n,o,r)}const Qe=WebGL2RenderingContext.prototype.enable||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.enable does not exist")};function Ze(e,t){Qe.call(s(e),t)}const et=WebGL2RenderingContext.prototype.enableVertexAttribArray||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.enableVertexAttribArray does not exist")};function tt(e,t){et.call(s(e),t)}const nt=WebGL2RenderingContext.prototype.framebufferTexture2D||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.framebufferTexture2D does not exist")};function ot(e,t,n,o,r,i){nt.call(s(e),t,n,o,s(r),i)}const rt=WebGL2RenderingContext.prototype.getAttribLocation||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getAttribLocation does not exist")};function it(e,t,n,o){let r=y(n,o);return rt.call(s(e),s(t),r)}const ct=WebGL2RenderingContext.prototype.getError||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getError does not exist")};function at(e){return ct.call(s(e))}const dt=WebGL2RenderingContext.prototype.getProgramInfoLog||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getProgramInfoLog does not exist")};function ut(e,t,n){const o=dt.call(s(t),s(n)),[r,i]=se(o)?[0,0]:X(o),c=p();c[e/4]=r,c[e/4+1]=i}const st=WebGL2RenderingContext.prototype.getProgramParameter||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getProgramParameter does not exist")};function lt(e,t,n){return c(st.call(s(e),s(t),n))}const ft=WebGL2RenderingContext.prototype.getShaderInfoLog||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getShaderInfoLog does not exist")};function _t(e,t,n){const o=ft.call(s(t),s(n)),[r,i]=se(o)?[0,0]:X(o),c=p();c[e/4]=r,c[e/4+1]=i}const gt=WebGL2RenderingContext.prototype.getShaderParameter||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getShaderParameter does not exist")};function wt(e,t,n){return c(gt.call(s(e),s(t),n))}const pt=WebGL2RenderingContext.prototype.getUniformLocation||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.getUniformLocation does not exist")};function mt(e,t,n,o){let r=y(n,o);const i=pt.call(s(e),s(t),r);return se(i)?0:c(i)}const bt=WebGL2RenderingContext.prototype.linkProgram||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.linkProgram does not exist")};function ht(e,t){bt.call(s(e),s(t))}const yt=WebGL2RenderingContext.prototype.shaderSource||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.shaderSource does not exist")};function xt(e,t,n,o){let r=y(n,o);yt.call(s(e),s(t),r)}const Et=WebGL2RenderingContext.prototype.texParameteri||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.texParameteri does not exist")};function Lt(e,t,n,o){Et.call(s(e),t,n,o)}const Ct=WebGL2RenderingContext.prototype.uniform1f||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.uniform1f does not exist")};function vt(e,t,n){Ct.call(s(e),s(t),n)}const Rt=WebGL2RenderingContext.prototype.uniform1i||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.uniform1i does not exist")};function Gt(e,t,n){Rt.call(s(e),s(t),n)}const Wt=WebGL2RenderingContext.prototype.useProgram||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.useProgram does not exist")};function It(e,t){Wt.call(s(e),s(t))}const Pt=WebGL2RenderingContext.prototype.vertexAttribPointer||function(){throw new Error("wasm-bindgen: WebGL2RenderingContext.prototype.vertexAttribPointer does not exist")};function St(e,t,n,o,r,i,c){Pt.call(s(e),t,n,o,0!==r,i,c)}function At(e){return s(e)instanceof WheelEvent?1:0}const Dt=E(WheelEvent.prototype,"deltaY").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(WheelEvent.prototype, 'deltaY').get does not exist")};function kt(e){return Dt.call(s(e))}function Mt(e){return s(e)instanceof Window?1:0}const Ot=function(e){return this.requestAnimationFrame(e)};function Bt(e,t,n){try{return Ot.call(s(e),s(t))}catch(e){const t=p();t[n/4]=1,t[n/4+1]=c(e)}}const Tt=function(){return this.document};function Ft(e){const t=Tt.call(s(e));return se(t)?0:c(t)}const Ht=function(){return this.performance};function Ut(e){const t=Ht.call(s(e));return se(t)?0:c(t)}function jt(e){return c(new Float32Array(s(e)))}const qt=Float32Array.prototype.fill||function(){throw new Error("wasm-bindgen: Float32Array.prototype.fill does not exist")};function Vt(e,t,n,o){return c(qt.call(s(e),t,n,o))}const Yt=E(Float32Array.prototype,"buffer").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Float32Array.prototype, 'buffer').get does not exist")};function zt(e){return c(Yt.call(s(e)))}function Xt(e,t){let n=y(e,t);return c(new Function(n))}const Kt=Function.prototype.call||function(){throw new Error("wasm-bindgen: Function.prototype.call does not exist")};function Nt(e,t,n){try{return c(Kt.call(s(e),s(t)))}catch(e){const t=p();t[n/4]=1,t[n/4+1]=c(e)}}function Jt(e){return s(e)instanceof Int32Array?1:0}function $t(e){return c(new Int32Array(s(e)))}const Qt=Int32Array.prototype.fill||function(){throw new Error("wasm-bindgen: Int32Array.prototype.fill does not exist")};function Zt(e,t,n,o){return c(Qt.call(s(e),t,n,o))}const en=E(Int32Array.prototype,"buffer").get||function(){throw new Error("wasm-bindgen: GetOwnOrInheritedPropertyDescriptor(Int32Array.prototype, 'buffer').get does not exist")};function tn(e){return c(en.call(s(e)))}const nn=Int32Array.prototype.forEach||function(){throw new Error("wasm-bindgen: Int32Array.prototype.forEach does not exist")};let on=null;function rn(e){const t=(null===on&&(on=o.c()),on/4+e);return p()[t]}function cn(e,t){let n=function(e,t,n){let o=this.a;this.a=0;try{return this.f(o,this.b,e,t,c(n))}finally{this.a=o}};n.f=o.b.get(t),n.a=rn(0),n.b=rn(1);try{nn.call(s(e),n.bind(n))}finally{n.a=n.b=0}}function an(){return c(new Object)}const dn=Reflect.set.bind(Reflect)||function(){throw new Error("wasm-bindgen: Reflect.set.bind(Reflect) does not exist")};function un(e,t,n,o){try{return dn(s(e),s(t),s(n))?1:0}catch(e){const t=p();t[o/4]=1,t[o/4+1]=c(e)}}class sn{free(){const e=this.ptr;this.ptr=0,function(e){o.a(e)}(e)}constructor(e,t,n,r,i,c,a,d){this.ptr=o.f(e,t,n,r,i,c,a?1:0,d)}add(e){return o.e(this.ptr,c(e))}}function ln(e){if(1==(1&e))return c(s(e));return r[e>>1].cnt+=1,e}function fn(e){if((e>>=1)<4)return;let t=r[e];t.cnt-=1,t.cnt>0||(r[e]=i,i=e)}function _n(e){fn(e)}function gn(e,t){return c(y(e,t))}function wn(e){return c(e)}function pn(e){let t=s(e);return"boolean"==typeof t?t?1:0:2}function mn(e){let t=s(e).original;t.a=t.b=0,fn(e)}function bn(e,t,n){let r=function(e){let t=this.a;this.a=0;try{return this.f(t,c(e))}finally{this.a=t}};r.f=o.b.get(t),r.a=e;let i=r.bind(r);return i.original=r,c(i)}function hn(e,t){throw new Error(y(e,t))}function yn(e){return Math.tan(e)}},function(e,t,n){"use strict";var o=n.w[e.i];e.exports=o;n(2);o.i()}],0,[0]]);